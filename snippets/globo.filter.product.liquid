{%- comment -%}Do not edit this file{%- endcomment -%}
{% raw %}
  {%- assign swatch_options = '' | downcase | split: "~~" | uniq -%}
  {%- assign image_options  = 'Colour~~Color' | downcase | split: "~~" | uniq -%}
  {%- assign text_options   = '' | downcase | split: "~~" | uniq  -%}

  {%- assign image_size     = '360x504' -%}
  {%- assign no_image = 'https://cdn.shopify.com/s/images/themes/product-1.png' -%}

  {%- assign featured_image            = product.featured_image -%}
  {%- assign product_price             = product.price -%}
  {%- assign product_compare_at_price  = product.compare_at_price -%}

  {%- comment -%} Find first available (in-stock) variant instead of just first available {%- endcomment -%}
  {%- assign selected_or_first_available_variant = null -%}
  {%- for variant in product.variants -%}
    {%- if variant.available -%}
      {%- assign selected_or_first_available_variant = variant -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}

  {%- comment -%} Fallback to product's first available variant if no in-stock variant found {%- endcomment -%}
  {%- unless selected_or_first_available_variant -%}
    {%- assign selected_or_first_available_variant = product.selected_or_first_available_variant -%}
  {%- endunless -%}

  {%- assign variant_url = '' -%}
  {%- if selected_or_first_available_variant -%}
    {%- assign variant_url = '?variant=' | append: selected_or_first_available_variant.id -%}
  {%- endif -%}

  {%- comment -%} Always prioritize our first in-stock variant over any selected variant {%- endcomment -%}
  {% if selected_or_first_available_variant %}
    {% assign product_price             = selected_or_first_available_variant.price %}
    {% assign product_compare_at_price  = selected_or_first_available_variant.compare_at_price %}
    {% if selected_or_first_available_variant.image %}
      {% assign featured_image = selected_or_first_available_variant.image %}
    {% endif %}
  {% endif %}
              {%- assign images_count = product.images | size -%}
<div{% if showPageData %} data-page="{{page}}"{% endif %} class="spf-col-xl-3 spf-col-lg-4 spf-col-md-6 spf-col-sm-6 spf-col-6">
    <div class="spf-product-card spf-product-card__left spf-product-card__template-5{% unless product.available %} spf-soldout{% endunless %}">
        <div class="spf-product-card__inner">
        {%- unless product.available -%}
                        {%- elsif product_compare_at_price > product_price -%}
        <span translatable class="spf-product__label spf-product__label-sale sale-percent">
                        -{{ product_compare_at_price | minus: product_price | times: 100.0 | divided_by: product_compare_at_price | round }}%                    </span>
                {%- endunless -%}

        <a class="spf-product-card__image-wrapper" href="{{root_url}}{{ product.url }}{{variant_url}}" style="padding-top:140%;">
            {%- if featured_image -%}
              {%- comment -%} Show only the featured image (from in-stock variant) {%- endcomment -%}
              <img
                data-variants="{% if featured_image.variant_ids %}{{featured_image.variant_ids | join: ','}}{% endif %}"
                class="gflazyload spf-product-card__image spf-product-card__image-main"
                srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                src="{{featured_image.src | img_url: image_size}}"
                data-src="{{featured_image.src | img_lazyload_url}}"
                data-sizes="auto"
                data-aspectratio="{{featured_image.aspect_ratio}}"
                data-parent-fit="contain"
                alt="{{featured_image.alt | escape}}"
              />
            {%- elsif images_count > 0 -%}
              {%- comment -%} Fallback to first product image if no featured image {%- endcomment -%}
              <img
                data-variants=""
                class="gflazyload spf-product-card__image spf-product-card__image-main"
                srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                src="{{product.images.first.src | img_url: image_size}}"
                data-src="{{product.images.first.src | img_lazyload_url}}"
                data-sizes="auto"
                data-aspectratio="{{product.images.first.aspect_ratio}}"
                data-parent-fit="contain"
                alt="{{product.images.first.alt | escape}}"
              />
            {% else %}
              <img data-variants="" class="gflazyload spf-product-card__image spf-product-card__image-main" src="{{no_image}}" alt="{{product.title | escape}}">
            {% endif %}
        </a>
                <div class="spf-product__swatchs_container">
          {%- for option in product.options -%}
            {%- assign optionIndex = 'option' | append: forloop.index -%}
            {%- assign optionIndexNumber = forloop.index -%}
            {%- if option.isSwatch -%}
              <div class="spf-product__swatchs round">
                {%- for value in option.values -%}
                  {%- assign swatch = option.swatches[forloop.index0] -%}
                  <span data-option="{{optionIndexNumber}}" data-option-value="{{value | escape}}" class="spf-product__swatch{% if product.selected_or_first_available_variant and product.selected_or_first_available_variant[optionIndex] == value %} is-selected{% endif %}{% unless swatch.available %} soldout{% endunless %}" title="{{value | escape}}">
                    <span translatable class="spf-product__swatch-inner">
                      {%- if swatch.mode == 4 and swatch.image -%}
                        <span class="spf-product__swatch-image" style="background-image: url('{{ swatch.image | img_url: '24x' }}')"></span>
                      {%- elsif swatch.mode == 3 and swatch.image -%}
                        <span class="spf-product__swatch-image" style="background-image: url('{{ swatch.image }}')"></span>
                      {%- elsif swatch.mode == 2 and swatch.color_1 and swatch.color_2 -%}
                        <span class="spf-product__swatch-color" style="background-color: {{ swatch.color_1 }}"></span>
                        <span class="spf-product__swatch-color" style="border-right-color: {{ swatch.color_2 }}"></span>
                      {%- elsif swatch.mode == 1 and swatch.color_1 -%}
                        <span class="spf-product__swatch-color" style="background-color: {{ swatch.color_1 }}"></span>
                      {%- elsif swatch.lable -%}
                        <span class="spf-product__swatch-text">{{swatch.lable}}</span>
                      {%- else -%}
                        <span class="spf-product__swatch-text">{{value}}</span>
                      {%- endif -%}
                    </span>
                  </span>
                {%- endfor -%}
              </div>
            {%- endif -%}
          {%- endfor -%}
        </div>
                </div>

        <div class="spf-product__info">
                {% if product.vendor %}<div class="spf-product-card__vendor"><a href="/collections/vendors?q={{product.vendor | url_encode}}">{{product.vendor}}</a></div>{% endif %}
                <div class="h4 spf-product-card__title">
            <a translatable href="{{root_url}}{{ product.url }}{{variant_url}}">{{product.title}}</a>
                                            </div>
                    <div class="jdgm-widget jdgm-preview-badge" data-id="{{ product.id }}" data-template="manual-installation" data-auto-install="false">{{product.metafields.judgeme.badge}}</div>
                                                <div class="spf-product-card__price-wrapper">
            {%- if product_compare_at_price > product_price -%}
            <span class="spf-product-card__oldprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_compare_at_price | money }}</span>
            <span class="spf-product-card__saleprice{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
            {% else %}
            <span class="spf-product-card__price{% unless currencyFormat contains 'money' %} money{% endunless %}">{{ product_price | money }}</span>
            {% endif %}
        </div>
                <form class="spf-product__form" action="{{ root_url }}/cart/add" method="post">
            <select name="id" class="spf-product__variants">
            {%- for variant in product.variants -%}
            <option data-option1="{{variant.option1 | escape}}" data-option2="{{variant.option2 | escape}}" data-option3="{{variant.option3 | escape}}" data-price="{{variant.price}}" data-compare_at_price="{{variant.compare_at_price}}" data-available="{{variant.available}}" data-image="{% if variant.image.src %}{{variant.image.src | img_url: image_size }}{% endif %}" {% if variant.id == selected_or_first_available_variant.id %} selected="selected" {% endif %} value="{{ variant.id }}">{{ variant.title }}</option>
            {%- endfor -%}
            </select>
                                </form>
        </div>
    </div>
</div>
      {% endraw %}